@reference '../../index.css';

main {
  @apply py-4 grid gap-2;

  .wishlist-header {
    .wishlist-header-container {
      @apply bg-secondary p-2 pb-0 rounded-sm shadow-simple-tiny grid grid-rows-[auto_0fr] transition-[grid] gap-2;

      &.expanded {
        @apply grid-rows-[auto_1fr] pb-2;
      }

      .content {
        .content-header {
          @apply flex justify-between items-start gap-1 mb-1 relative;

          &.open {
            & > button {
              svg {
                @apply text-cta;
              }
            }

            .content-menu {
              @apply block;
            }
          }

          h3 {
            @apply text-title font-medium mb-1 break-words leading-[1];
          }

          & > button {
            @apply mt-[-1rem] mr-[-1.2rem] p-1 bg-dark rounded-[50%] transition-[filter] hover:brightness-75 cursor-pointer flex justify-center items-center;

            &.open {
              svg {
                @apply text-cta;
              }
            }

            svg {
              @apply w-2 h-2 text-title transition-colors;
            }
          }
        }

        & > p {
          @apply text-sm text-description;

          span {
            @apply font-medium text-title;
          }
        }

        .content-menu {
          @apply absolute top-[-1rem] right-4 rounded-sm overflow-hidden shadow-centered-tiny hidden;

          button {
            @apply block bg-dark p-1 pr-2 text-title text-sm font-medium text-start text-nowrap transition-[filter] hover:brightness-75 last:border-t-1 last:border-t-description/50 w-full cursor-pointer;
          }
        }
      }

      .editing-container {
        @apply overflow-hidden relative z-0;

        .h-line {
          @apply mb-[14px];
        }

        .privacy-level {
          @apply grid gap-[6px];

          span {
            @apply text-sm font-medium text-title;
          }

          .btn-container {
            @apply grid grid-cols-3 rounded-sm sm:max-w-[40rem];

            button {
              @apply w-full text-sm text-title text-center font-medium py-1 bg-dark transition-[filter] hover:brightness-60 cursor-pointer z-0 focus:z-1;

              &:first-child {
                @apply rounded-tl-sm rounded-bl-sm;
              }

              &:last-child {
                @apply rounded-tr-sm rounded-br-sm;
              }

              &.selected {
                @apply bg-light font-bold text-dark brightness-100 hover:brightness-100;
              }
            }
          }

          & > button.link {
            @apply text-sm text-end mt-1;
          }
        }
      }
    }
  }

  .wishlist-item-form-container {
    @apply relative z-0;

    .inner-container {
      @apply rounded-sm bg-secondary shadow-simple-tiny;

      &.expanded {
        .header {
          @apply border-b-light-gray rounded-bl-none rounded-br-none;
        }

        svg {
          @apply rotate-180;
        }

        form.wishlist-item-form {
          @apply py-2;
        }
      }

      .header {
        @apply w-full flex justify-between items-center p-2 bg-secondary text-title transition-[filter_colors] hover:brightness-110 hover:text-cta cursor-pointer border-b-1 border-b-secondary rounded-sm;

        p {
          @apply font-medium;
        }

        svg {
          @apply w-[1.6rem] h-[1.6rem];
        }
      }

      form.wishlist-item-form {
        @apply px-2 shadow-none rounded-none;
      }
    }
  }

  form.wishlist-item-form {
    @apply bg-secondary grid gap-2 rounded-sm shadow-simple-tiny overflow-hidden relative z-0;

    &.edit-mode {
      .btn-container {
        @apply sm:flex-col md:flex-row;

        button {
          &:first-child {
            @apply sm:w-full md:w-fit sm:order-2 md:order-1;
          }

          &:last-child {
            @apply sm:w-full md:w-fit sm:order-1 md:order-2;
          }
        }
      }
    }

    .btn-container {
      @apply flex flex-col sm:flex-row justify-start items-center gap-1;
    }
  }

  .wishlist-items-toolbar {
    .inner-container {
      & > header {
        @apply flex justify-start items-center gap-1 mb-1 text-title;

        .toolbar-btn {
          @apply bg-dark p-1 rounded-[50%] shadow-simple-tiny cursor-pointer transition-[filter_colors] hover:brightness-75;

          svg {
            @apply w-2 h-2;
          }
        }

        .view {
          @apply flex justify-between gap-2 mr-auto px-2 bg-dark shadow-simple-tiny overflow-hidden rounded-pill relative after:absolute after:top-0 after:left-0 after:h-full after:w-1/2 after:bg-secondary after:transition-transform;

          &.single-column-grid {
            @apply after:translate-x-full;
          }
        }

        .options,
        .sort {
          @apply relative z-3;

          &.open {
            button {
              @apply text-cta;
            }

            .options-menu,
            .sort-menu {
              @apply block;
            }
          }

          .options-menu,
          .sort-menu {
            @apply absolute top-0 right-[4.4rem] rounded-sm overflow-hidden shadow-centered-tiny hidden;

            button {
              @apply block bg-dark p-1 pr-2 text-title text-sm font-medium text-start text-nowrap transition-[filter] hover:brightness-75 w-full cursor-pointer;
            }
          }
        }
      }

      .filters {
        @apply hidden bg-secondary p-2 rounded-sm shadow-simple-tiny mb-2;

        &.open {
          @apply block;
        }

        .filter-item {
          @apply not-last:mb-1;

          &.open {
            @apply not-last:mb-2;

            .checkbox-container {
              @apply grid;
            }
          }

          & > header {
            @apply flex justify-start items-center mb-1;
          }

          .checkbox-container {
            @apply hidden gap-[1.4rem] pl-1;

            .checkbox-btn {
              @apply flex justify-center items-center gap-[4px] w-fit cursor-pointer transition-[filter] hover:brightness-75;

              &.checked {
                .checkbox {
                  @apply bg-cta;

                  svg {
                    @apply scale-100 rotate-0;
                  }
                }
              }

              .checkbox {
                @apply grid place-items-center w-[1.4rem] h-[1.4rem] bg-light rounded-[1px];

                svg {
                  @apply w-[1rem] h-[1rem] transition-transform rotate-180 scale-0;
                }
              }

              span {
                @apply text-sm text-description leading-[1];
              }
            }
          }
        }

        .btn-container {
          @apply flex flex-col sm:flex-row justify-start items-start gap-1 mt-2;

          button {
            @apply w-full sm:w-fit first:order-1 nth-[2]:order-2 last:order-3 sm:first:order-3 sm:last:order-1 last:mt-1 sm:last:mt-0;
          }
        }
      }
    }
  }

  .wishlist-items {
    .wishlist-items-container {
      @apply grid grid-cols-1 sm:grid-cols-2 gap-1 items-start;

      p.no-items {
        @apply sm:col-span-2 text-sm font-medium text-description w-fit mx-auto;
      }

      .wishlist-item {
        @apply bg-secondary rounded-sm shadow-simple-tiny;

        &.purchased {
          .header {
            @apply after:absolute after:top-[-1rem] after:right-[-1rem] after:w-2 after:h-2 after:bg-cta after:rotate-45 after:z-1;
          }
        }

        &.expanded {
          .header {
            @apply rounded-bl-none rounded-br-none border-b-light-gray;

            span {
              svg {
                @apply rotate-180;
              }
            }
          }

          .body {
            @apply flex;
          }
        }

        form.wishlist-item-form {
          @apply shadow-none rounded-none;

          input {
            @apply sm:text-sm;
          }
        }

        .header {
          @apply relative bg-secondary w-full flex justify-between items-start gap-1 px-2 py-1 transition-[filter_colors] hover:brightness-110 cursor-pointer rounded-sm border-b-1 border-b-secondary overflow-hidden;

          h4 {
            @apply text-title py-[8.4px];
          }

          span {
            @apply p-1 rounded-[50%] mr-[-1rem];

            svg {
              @apply text-title w-[1.6rem] h-[1.6rem];
            }
          }
        }

        .body {
          @apply hidden justify-between items-start gap-1 p-2 pt-1;

          .body-content {
            @apply w-full text-sm text-description grid gap-1;

            .info {
              @apply pr-1 whitespace-nowrap overflow-hidden text-ellipsis;

              span {
                @apply brightness-75;
              }
            }

            .tags {
              span {
                @apply inline-block p-[4px] m-[2px] bg-light text-dark rounded leading-[1] break-words max-w-[20rem] font-medium;
              }
            }

            .description {
              @apply whitespace-break-spaces;
            }
          }

          .body-btn-container {
            @apply grid gap-1 mr-[-1rem] relative place-items-center;

            &.open {
              .item-menu-btn {
                @apply bg-dark;

                svg {
                  @apply text-cta;
                }
              }

              .item-menu {
                @apply block;
              }
            }

            & > button {
              @apply p-1 rounded-[50%] transition-colors cursor-pointer;

              &.item-menu-btn {
                @apply hover:bg-dark mt-[-8px];
              }

              &.mark-as-purchased-btn {
                @apply bg-light/50 hover:bg-light;

                &.purchased {
                  @apply bg-cta hover:bg-cta/75;
                }
              }

              svg {
                @apply w-[1.6rem] h-[1.6rem];
              }
            }

            .spinner {
              @apply w-[2.6rem] h-[2.6rem] my-[5px];
            }

            .item-menu {
              @apply absolute top-[-1rem] right-4 rounded-sm overflow-hidden shadow-centered-tiny hidden;

              button {
                @apply block bg-dark p-1 pr-2 text-title text-sm font-medium text-start text-nowrap transition-[filter] hover:brightness-75 last:border-t-1 last:border-t-description/50 w-full cursor-pointer;
              }
            }
          }
        }
      }
    }
  }
}
